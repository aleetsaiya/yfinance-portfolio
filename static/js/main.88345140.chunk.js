(this.webpackJsonpportfolio=this.webpackJsonpportfolio||[]).push([[0],{28:function(t,e,a){},33:function(t,e,a){},53:function(t,e,a){},54:function(t,e,a){"use strict";a.r(e);var r=a(1),n=a(9),s=a.n(n),i=(a(28),a(4)),o=a(3),c=a(22),l=a.n(c),d=a(11),u=a(5),b=a.n(u),h=a(0),f=function(t){var e=t.series,a=t.labels;return Object(h.jsx)(b.a,{options:Object(d.a)({labels:a},{chart:{foreColor:"#fff"},stroke:{colors:["#161d20"]},colors:["#ED5565","#FFCE54","#48CFAD","#4FC1E9","#FC6E51","#5D9CEC"],dataLabels:{enabled:!1}}),series:e,type:"donut",height:"200px"})},j=(a(33),function(t){var e=t.headRow,a=t.dataRows,n=t.targetData,s=Object(r.useState)(0),i=Object(o.a)(s,2),c=i[0],l=i[1],d=function(t){0===c&&-1===t||5*(c+t)>a.length||l(c+t)},u=function(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)};return Object(h.jsxs)("div",{className:"tableBlock",children:[Object(h.jsxs)("table",{children:[Object(h.jsx)("thead",{children:Object(h.jsx)("tr",{children:e.map((function(t){return Object(h.jsx)("th",{children:t},t)}))})}),Object(h.jsx)("tbody",{children:a.slice(5*c,5*c+5).map((function(t,e){return Object(h.jsx)("tr",{children:n.map((function(a){if("averageCost"===a){var r=u(t.totalCost/t.totalQuantity,2);return Object(h.jsxs)("td",{children:[" ",r," "]},r.toString()+"-"+e.toString())}return"holdingPercent"===a?Object(h.jsx)("td",{children:t[a]+"%"},t[a].toString()+"-"+e.toString()):Object(h.jsx)("td",{children:"number"===typeof t[a]?u(t[a],2):t[a]},t[a].toString()+"-"+e.toString())}))},e)}))})]}),Object(h.jsxs)("div",{className:"paging",children:[Object(h.jsx)("button",{className:"page",onClick:function(){return d(-1)},disabled:0===c?"disabled":"",children:"<"}),Object(h.jsx)("button",{className:"page",onClick:function(){return d(1)},disabled:5*(c+1)>a.length?"disabled":"",children:">"})]})]})}),p=function(t){var e=t.title,a=t.data;return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"title",style:{fontSize:"15px"},children:e}),Object(h.jsx)("div",{className:"data",style:{fontSize:"35px"},children:a})]})},O=function(t){var e=t.series,a=t.labels,r={chart:{type:"bar",foreColor:"#fff"},yaxis:{labels:{formatter:function(t){return t.toFixed(2)+"%"}}},plotOptions:{bar:{colors:{ranges:[{from:Number.NEGATIVE_INFINITY,to:0,color:"#F15B46"},{from:0,to:Number.MAX_SAFE_INTEGER,color:"#76c68f"}]},columnWidth:"45%"}},dataLabels:{enabled:!1}};return Object(h.jsx)(b.a,{options:Object(d.a)({xaxis:{categories:a}},r),series:[{name:"Profit",data:e}],type:"bar",height:"240px"})},g=function(t){var e=t.data;return Object(h.jsx)(b.a,{options:{chart:{height:350,type:"area",foreColor:"#fff",zoom:{enabled:!1}},stroke:{curve:"straight"},xaxis:{type:"datetime"},yaxis:{labels:{formatter:function(t){return t.toFixed(1)}}},dataLabels:{enabled:!1}},series:[{name:"price",data:e}],type:"area",style:{color:"#000"},height:"300px"})},y=a(6),v=(a(34),a(23)),m=a.n(v),x=(a(53),function(){var t=Object(r.useState)({infoData:{},enterprises:[],tradingHistory:[]}),e=Object(o.a)(t,2),a=e[0],n=e[1],s=Object(r.useState)(!1),c=Object(o.a)(s,2),d=c[0],u=c[1],b=Object(r.useState)(!1),v=Object(o.a)(b,2),x=v[0],D=v[1],N=Object(r.useState)(!1),S=Object(o.a)(N,2),P=S[0],k=S[1],C=Object(r.useState)(1),w=Object(o.a)(C,2),F=w[0],I=w[1],E=Object(r.useState)(1.5),T=Object(o.a)(E,2),M=T[0],Q=T[1],R=Object(r.useState)([{x:new Date(16402698e5).toLocaleString(),y:100}]),q=Object(o.a)(R,2),H=q[0],A=q[1],B=Object(r.useState)([]),L=Object(o.a)(B,2),J=(L[0],L[1],{headRow:["\u4ee3\u865f","\u80a1\u6578","\u55ae\u4f4d\u6210\u672c","\u6700\u65b0\u50f9","\u6301\u80a1\u5360\u6bd4"],targetData:["symbol","totalQuantity","averageCost","currentPrice","holdingPercent"]}),V={headRow:["\u4ee3\u865f","\u4ea4\u6613\u6642\u9593","\u80a1\u6578","\u6210\u4ea4\u50f9","\u91d1\u984d"],targetData:["symbol","tradingDate","quantity","purchasePrice","totalCost"]};Object(r.useEffect)((function(){console.log("in use Effect"),document.title="Portfolio",x&&F>0&&setTimeout((function(){return I(F-1)}),1e3),d&&M>0&&setTimeout((function(){return Q(M-.5)}),500)}));var G=function(t,e){for(var a=0;a<t.length;a++)if(t[a].symbol===e)return a;return!1},Y=function(t){var e=[],a={symbol:t[0].indexOf("Symbol"),purchasePrice:t[0].indexOf("Purchase Price"),quantity:t[0].indexOf("Quantity"),tradingDate:t[0].indexOf("Trade Date"),currentPrice:t[0].indexOf("Current Price")};if($(t[0])){for(var r=1;r<t.length;r++)t[r][a.symbol]&&t[r][a.purchasePrice]&&t[r][a.quantity]&&e.push(t[r]);z(e,a)}},z=function(t,e){var a=_(t,e),r=a.infoData,s=a.enterprises,i=U(t,e);n({enterprises:s,tradingHistory:i,infoData:r}),D(!0)},_=function(t,e){var a,r=[],n=0,s=0,o=0,c=Object(i.a)(t);try{for(c.s();!(a=c.n()).done;){var l=a.value,d=l[e.symbol],u=parseFloat(l[e.currentPrice]),b=parseFloat(l[e.tradingDate]),h=parseFloat(l[e.purchasePrice]),f=parseFloat(l[e.quantity]);n+=h*f,o+=u*f;var j=G(r,d);!1!==j?(r[j].tradingHistory.push({purchasePrice:h,quantity:f}),r[j].totalCost+=h*f,r[j].totalQuantity+=f):r.push({symbol:d,currentPrice:u,tradingDate:b,totalCost:h*f,totalQuantity:f,tradingHistory:[{purchasePrice:h,quantity:f}]})}}catch(N){c.e(N)}finally{c.f()}for(var p=0,O=r;p<O.length;p++){var g=O[p];g.holdingPercent=Math.round(g.currentPrice*g.totalQuantity/o*1e4)/100;var y,v=0,m=g.currentPrice,x=Object(i.a)(g.tradingHistory);try{for(x.s();!(y=x.n()).done;){var D=y.value;v+=(m-D.purchasePrice)*D.quantity}}catch(N){x.e(N)}finally{x.f()}g.totalProfit=v,s+=v}return r.sort((function(t,e){return e.holdingPercent-t.holdingPercent})),{infoData:{totalCost:(Math.round(100*n)/100).toString(),myAsset:(Math.round(100*(n+s))/100).toString(),ROI:(Math.round(s/n*1e4)/100).toString()+"%",totalProfit:s>0?"+"+(Math.round(100*s)/100).toString():(Math.round(100*s)/100).toString()},enterprises:r}},U=function(t,e){var a,r=[],n=Object(i.a)(t);try{for(n.s();!(a=n.n()).done;){var s=a.value,o=s[e.symbol],c=s[e.tradingDate],l=parseFloat(s[e.purchasePrice]),d=parseFloat(s[e.quantity]);c=c?c.slice(0,4)+"/"+c.slice(4,6)+"/"+c.slice(6,8):"NaN",r.push({symbol:o,tradingDate:c,quantity:d,purchasePrice:l,totalCost:l*d})}}catch(u){n.e(u)}finally{n.f()}return r.sort((function(t,e){if("NaN"===t.tradingDate&&"NaN"!==e.tradingDate)return 1;if("NaN"!==t.tradingDate&&"NaN"===e.tradingDate)return-1;var a=t.tradingDate.split("/"),r=e.tradingDate.split("/");return parseInt(a[0])>parseInt(r[0])?-1:parseInt(a[0])<parseInt(r[0])?1:parseInt(a[1])>parseInt(r[1])?-1:parseInt(a[1])<parseInt(r[1])?1:parseInt(a[2])>parseInt(r[2])?-1:parseInt(a[2])<parseInt(r[2])?1:void 0})),r},X=function(){var t,e=[],r=Object(i.a)(a.enterprises);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n.symbol)}}catch(s){r.e(s)}finally{r.f()}return e},K=function(){var t,e=[],r=Object(i.a)(a.enterprises);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n.holdingPercent)}}catch(s){r.e(s)}finally{r.f()}return e},W=function(){var t,e=[],r=Object(i.a)(a.enterprises);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(Math.round(n.totalProfit/n.totalCost*1e4)/100)}}catch(s){r.e(s)}finally{r.f()}return e},Z=function(t,e){var r=[],n=new Date;n.setMonth(n.getMonth()-t),n.setDate(n.getDate()-e);for(var s=Date.now(),o=function(t,e){var a=t.getFullYear(),r=t.getMonth(),n=t.getDate(),s=e.getFullYear(),i=e.getMonth(),o=e.getDate();return a<s||a===s&&r<i||a===s&&r===i&&n<o?1:a===s&&r===i&&n===o?0:-1},c=JSON.parse(localStorage.getItem("symbols")),l=n;l<=s;l.setDate(l.getDate()+1)){var d,u=0,b=[],h=Object(i.a)(c);try{for(h.s();!(d=h.n()).done;)for(var f=d.value,j=0;j<f.date.length;j++){if(j===f.date.length-1){b.push({symbol:f.symbol,price:f.data[j]});break}if(0===o(l,new Date(1e3*f.date[j]))){b.push({symbol:f.symbol,price:f.data[j]});break}if(-1===o(l,new Date(1e3*f.date[j]))&&1===o(l,new Date(1e3*f.date[j+1]))){b.push({symbol:f.symbol,price:f.data[j-1]});break}}}catch(y){h.e(y)}finally{h.f()}var p,O=Object(i.a)(a.tradingHistory);try{var g=function(){var t=p.value;if(-1===o(l,new Date(t.tradingDate))||0===o(l,new Date(t.tradingDate))){var e=b.find((function(e){return e.symbol===t.symbol}));u+=t.quantity*e.price}};for(O.s();!(p=O.n()).done;)g()}catch(y){O.e(y)}finally{O.f()}r.push({x:l.toLocaleDateString(),y:u})}A(r)},$=function(t){for(var e=0,a=["Symbol","Purchase Price","Quantity","Current Price","Trade Date"];e<a.length;e++){var r=a[e];if(-1===t.indexOf(r))return k(!1),y.b.error("Please check your csv file."),!1}return!0},tt=function(t){var e,a=t.target.parentNode.childNodes,r=Object(i.a)(a);try{for(r.s();!(e=r.n()).done;){e.value.classList.remove("focus")}}catch(n){r.e(n)}finally{r.f()}t.target.classList.add("focus")};return Object(h.jsxs)("div",{className:"App",children:[console.log("in render"),Object(h.jsx)("h1",{children:"Portfolio"}),Object(h.jsx)("div",{className:!x||x&&F<=0?"hide":"load"}),Object(h.jsxs)("div",{className:x?"hide":"",children:[Object(h.jsx)("div",{className:"drag-file-block",onDragEnter:function(t){t.stopPropagation(),t.preventDefault(),k(!0)},onDragOver:function(t){t.stopPropagation(),t.preventDefault()},onDragLeave:function(t){t.preventDefault(),t.stopPropagation(),k(!1)},onDrop:function(t){if(t.preventDefault(),t.stopPropagation(),"file"===t.dataTransfer.items[0].kind){var e=t.dataTransfer.items[0].getAsFile(),a=new FileReader;a.onload=function(){var t,e=a.result.split("\n"),r=[],n=Object(i.a)(e);try{for(n.s();!(t=n.n()).done;){var s=t.value;r.push(s.split(","))}}catch(o){n.e(o)}finally{n.f()}Y(r)},a.readAsBinaryString(e)}else y.b.error("Please check your csv file"),k(!1)},style:P?{backgroundColor:"rgba(173, 216, 230, .5)"}:{backgroundColor:"inherit"},children:Object(h.jsx)("div",{className:"dropInfo",children:"\u5c07 csv \u6a94\u62d6\u66f3\u81f3\u6b64"})}),Object(h.jsxs)("label",{className:"input-label",children:[Object(h.jsx)("span",{children:"\ud83d\udcc1 \u4e0a\u50b3\u6a94\u6848"}),Object(h.jsx)("div",{style:{display:"none"},children:Object(h.jsx)(l.a,{onFileLoaded:function(t){Y(t)}})})]}),Object(h.jsx)("label",{className:"input-label",onClick:function(){z([["SMH","300","2021/12/6","16:00 EST","-1.1499939","299.57","301.38","290.51","5105964","20211206","299.02","0.96984","","","",""],["MSFT","326.19","2021/12/6","16:00 EST","3.1799927","323.95","327.42","319.23","30032556","20211126","334.11","0.29929","","","",""],["MSFT","326.19","2021/12/6","16:00 EST","3.1799927","323.95","327.42","319.23","30032556","20211206","324.71","1.75542","","","",""],["VOO","421.82","2021/12/6","16:00 EST","4.98001","419.41","423.64","417","7124862","20211126","424.96","0.35298","","","",""],["VOO","421.82","2021/12/6","16:00 EST","4.98001","419.41","423.64","417","7124862","20211206","419.85","2.71527","","","",""],["QQQ","386.2","2021/12/6","16:00 EST","3.0700073","383.63","387.6","379.31","64706783","20211126","396.07","0.25248","","","",""],["QQQ","386.2","2021/12/6","16:00 EST","3.0700073","383.63","387.6","379.31","64706783","20211206","384.08","2.23912","","","",""]],{symbol:0,purchasePrice:10,quantity:11,tradingDate:9,currentPrice:1})},children:Object(h.jsx)("span",{children:"\ud83d\udca1 \u4f7f\u7528\u7bc4\u4f8b"})})]}),Object(h.jsxs)("main",{style:x&&F<=0?{}:{visibility:"hidden"},children:[Object(h.jsxs)("div",{className:"block-row",id:"info",children:[Object(h.jsx)(p,{data:a.infoData.totalCost,title:"\u6295\u5165\u91d1\u984d"}),Object(h.jsx)(p,{data:a.infoData.myAsset,title:"\u80a1\u7968\u5e02\u503c"}),Object(h.jsx)(p,{data:a.infoData.ROI,title:"\u5831\u916c\u7387",highlight:!0}),Object(h.jsx)(p,{data:a.infoData.totalProfit,title:"\u7e3d\u640d\u76ca"})]}),Object(h.jsx)("div",{className:"block-title res-title",children:Object(h.jsx)("h3",{children:"\u6301\u80a1\u72c0\u6cc1"})}),Object(h.jsxs)("div",{className:"block-row",children:[Object(h.jsx)("div",{className:"left chart",children:Object(h.jsx)(f,{series:0===K().length?[8e4,45e3,16e3]:K(),labels:0===X().length?["stock1","stock2","stock3"]:X()})}),Object(h.jsx)("div",{className:"right",children:Object(h.jsx)(j,{headRow:J.headRow,dataRows:a.enterprises,targetData:J.targetData})})]}),Object(h.jsxs)("div",{className:"block-row",children:[Object(h.jsxs)("div",{className:"left chart",style:{color:"#000"},children:[Object(h.jsx)("div",{className:"block-title",children:Object(h.jsx)("h3",{children:"\u7e3e\u6548"})}),Object(h.jsx)(O,{series:0===W().length?[5,3,-10,10,7]:W(),labels:0===X().length?["stock1","stock2","stock3","stock4","stock5"]:X()})]}),Object(h.jsxs)("div",{className:"right",children:[Object(h.jsx)("div",{className:"block-title",children:Object(h.jsx)("h3",{children:"\u4ea4\u6613\u7d00\u9304"})}),Object(h.jsx)(j,{headRow:V.headRow,dataRows:a.tradingHistory,targetData:V.targetData})]})]}),Object(h.jsx)("div",{className:"block-title res-title",children:Object(h.jsx)("h3",{children:"\u80a1\u7968\u5e02\u503c\u8d70\u52e2"})}),Object(h.jsx)("button",{className:d?"hide":"input-label",onClick:function(){u(!0),m.a.request({method:"GET",url:"https://yfapi.net/v8/finance/spark",headers:{"x-api-key":"auNxCyh1Gf66HIXod3SN5aeAVI6JUB37Kd5iClYh"},params:{symbols:"MSFT,VOO,QQQ,SMH",interval:"1d",range:"1y"}}).then((function(t){var e=t.data;console.log("response",e);var a=[];for(var r in e)a.push({symbol:r,data:e[r].close,date:e[r].timestamp});localStorage.setItem("symbols",JSON.stringify(a)),Z(0,7)})).catch((function(t){console.log(t),y.b.error("Unexpected error occurred.")}))},children:"\u8acb\u6c42\u8cc7\u6599"}),Object(h.jsx)("div",{className:!d||d&&M<=0?"hide":"load"}),Object(h.jsxs)("div",{className:d&&0===M?"":"dontShow",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{className:"focus timeButton",onClick:function(t){Z(0,7),tt(t)},children:"7\u5929"}),Object(h.jsx)("button",{className:"timeButton",onClick:function(t){Z(1,0),tt(t)},children:"1\u6708"}),Object(h.jsx)("button",{className:"timeButton",onClick:function(t){Z(6,0),tt(t)},children:"6\u6708"}),Object(h.jsx)("button",{className:"timeButton",onClick:function(t){Z(12,0),tt(t)},children:"1\u5e74"})]}),Object(h.jsx)(g,{data:H})]}),Object(h.jsx)("div",{className:"footer"})]}),Object(h.jsx)(y.a,{position:"top-right",autoClose:5e3,theme:"dark",hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})});s.a.render(Object(h.jsx)(x,{}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.88345140.chunk.js.map