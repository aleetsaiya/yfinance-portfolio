{"version":3,"sources":["component/chart/DonutChart.jsx","component/Table.jsx","component/Info.jsx","component/chart/BarChart.jsx","component/chart/LineChart.jsx","App.js","index.js"],"names":["DonutChart","props","series","labels","defaultSetting","chart","foreColor","stroke","colors","dataLabels","enabled","plotOptions","pie","donut","show","name","fontSize","fontWeight","value","fontFamily","formatter","val","parseFloat","toFixed","total","label","color","w","globals","seriesTotals","reduce","a","b","options","type","height","Table","headRow","dataRows","targetData","useState","page","setPage","movePage","offset","length","Round","number","decimal","Math","round","pow","className","map","head","style","cursor","slice","row","index","target","aveCost","toString","random","msg","onClick","disabled","Info","title","data","BarChart","yaxis","y","bar","ranges","from","Number","NEGATIVE_INFINITY","to","MAX_SAFE_INTEGER","columnWidth","xaxis","categories","LineChart","zoom","curve","App","infoData","totalCost","myAsset","ROI","totalProfit","enterprises","tradingHistory","dataBundle","setDataBundle","reqSend","fileLoaded","reqState","setReqState","fileEnter","setFileEnter","x","Date","toLocaleString","hisPerformance","setHisPerformance","holdingStockTable","setHoldingStockTable","tradingHistoryTable","useEffect","console","log","document","getHisPerformance","demoData","requestFinanceData","initData","loadData","rows","i","trim","isValidCSV","indexBundle","symbol","indexOf","purchasePrice","quantity","tradingDate","symbols","push","find","s","getEnterprisesData","getTradingHistory","temp","totalAsset","currentPrices","localData","JSON","parse","sessionStorage","getItem","l","findEnterprise","ar","trading","currentPrice","totalQuantity","t","profit","th","sort","t1","t2","holdingPercent","d1","split","d2","parseInt","getEnterprisesSymbol","enterprise","getEnterprisesWeight","price","getEnterpriseProfit","ss","st","method","url","headers","params","interval","range","axios","request","then","response","close","date","timestamp","clear","setItem","stringify","catch","error","toast","monthsAgo","daysAgo","searchKey","performanceHistory","firstDate","setMonth","getMonth","setDate","getDate","now","compareDate","ay","getFullYear","am","ad","by","bm","bd","d","currentAsset","pastPrice","trade","pp","p","toLocaleDateString","fileData","errorMessage","csvReader","file","reader","FileReader","onload","dirtyRows","result","drow","readAsBinaryString","switchFocus","e","buttons","parentNode","childNodes","classList","remove","add","maxHeight","overflow","paddingLeft","paddingRight","onDragEnter","stopPropagation","preventDefault","onDragOver","onDragLeave","onDrop","dataTransfer","items","getAsFile","backgroundColor","size","display","accept","onChange","files","id","highlight","textContent","includes","position","autoClose","theme","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.b6ea70a7.chunk.js","sourcesContent":["import React from 'react';\r\nimport ReactApexChart from 'react-apexcharts';\r\n\r\nconst DonutChart = props => {\r\n    const { series, labels } = props;\r\n    const defaultSetting = {\r\n        chart: {\r\n            foreColor: '#fff',\r\n        },\r\n        stroke:{\r\n            colors:['#161d20']\r\n        },\r\n        colors: ['#ED5565', '#FFCE54', '#48CFAD', '#4FC1E9', '#FC6E51', '#5D9CEC'],\r\n        dataLabels: {\r\n            enabled: false\r\n        },\r\n        plotOptions: {\r\n          pie: {\r\n            donut: {\r\n                labels: {\r\n                    show: true,\r\n                    name: {\r\n                        show: true,\r\n                        fontSize: '20',\r\n                        fontWeight: '700',\r\n                    },\r\n                    value: {\r\n                        show: true,\r\n                        fontSize: '16',\r\n                        fontFamily: 'Microsoft JhengHei',\r\n                        fontWeight: '700',\r\n                        formatter: val => {\r\n                            return '$' + parseFloat(parseFloat(val).toFixed(0));\r\n                        }\r\n                    },\r\n                    total: {\r\n                        show: true,\r\n                        label: 'Total',\r\n                        fontFamily: 'Microsoft JhengHei',\r\n                        color: '#fff',\r\n                        fontWeight: '700',\r\n                        formatter: (w) => {\r\n                            const total = w.globals.seriesTotals.reduce((a, b) => {\r\n                                return a + b\r\n                            }, 0);\r\n                            return '$' + parseFloat(total.toFixed(0));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n          }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <ReactApexChart \r\n            options={{\r\n                labels: labels,\r\n                ...defaultSetting\r\n            }} \r\n            series={series} \r\n            type=\"donut\"\r\n            height=\"200px\"\r\n        />\r\n    )\r\n};\r\n\r\nexport default DonutChart;","import React , {useState} from 'react';\r\nimport './table.css'\r\n\r\nconst Table = props => {\r\n  const {headRow, dataRows, targetData} = props;\r\n  const [page, setPage] = useState(0);\r\n\r\n  const movePage = offset => {\r\n    if (page === 0 && offset === -1)\r\n      return;    \r\n    if ((page + offset) * 5 >= dataRows.length)\r\n      return;\r\n    setPage(page + offset);\r\n  };\r\n\r\n  const getData = () => {\r\n    const data = dataRows.slice(page*5, page*5+5);\r\n      return (data.map((row, index) => \r\n      <tr key={index}>\r\n        {\r\n          targetData.map(target => {\r\n            if (target === 'averageCost') {\r\n              const aveCost = Round(row['totalCost'] / row['totalQuantity'], 2);\r\n              return <td key={aveCost.toString() + '-' + index.toString() + '-' + Math.random().toFixed(3)}> {aveCost} </td>\r\n            }\r\n            if (target === 'holdingPercent') {\r\n              return <td key={row[target].toString() + '-' + index.toString() + '-' + Math.random().toFixed(3)}>{row[target] + '%'}</td>\r\n            }\r\n            if (target === 'totalProfit' || target === 'profitPercent') {\r\n              const green = {color: '#76c68f'};\r\n              const red = {color: '#F15B46'};\r\n              let msg = row[target] < 0 ? row[target].toFixed(2) : '+' + row[target].toFixed(2);\r\n              if (target === 'profitPercent')\r\n                msg += '%';\r\n              return (\r\n                <td \r\n                  key={row[target].toString() + '-' + index.toString() + '-' + Math.random().toFixed(3)}\r\n                  style={row[target] < 0 ? red : green}\r\n                >\r\n                  {msg}\r\n                </td>\r\n              )\r\n            }\r\n            return (\r\n              <td key={row[target].toString() + '-' + index.toString() + '-' + Math.random().toFixed(3)}>\r\n                {typeof row[target] === 'number' ? Round(row[target], 2) : row[target]}\r\n              </td>\r\n            );\r\n          })\r\n        }\r\n      </tr>\r\n    ));\r\n  }\r\n\r\n  const Round = (number, decimal) => Math.round(number*Math.pow(10, decimal)) / Math.pow(10, decimal);\r\n  return (\r\n    <div className=\"tableBlock\">\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            {headRow.map(head => {\r\n                return <th key={head} style={head === '損益' ? {cursor: 'pointer'}:{}}>{head}</th>;\r\n            })}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {getData()}\r\n        </tbody>\r\n      </table>\r\n      <div className=\"paging\">\r\n        <button className=\"page\" onClick={() => movePage(-1)} disabled={page === 0 ? 'disabled':''}>{'<'}</button>\r\n        <button className=\"page\" onClick={() => movePage(1)} disabled={(page + 1) * 5 >= dataRows.length ? 'disabled':''}>{'>'}</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Table;","import React from 'react';\r\n\r\nconst Info = props => {\r\n    const {title, data} = props;\r\n\r\n    return (\r\n        <div>\r\n            <div className='title' style={{fontSize: '15px'}}>{title}</div>\r\n            <div className='data' style={{fontSize: '35px'}}>{data}</div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Info;","import React from 'react';\r\nimport ReactApexChart from 'react-apexcharts';\r\n\r\nconst BarChart = props => {\r\n    const {series, labels} = props;\r\n    const defaultSetting = {\r\n        chart: {\r\n            type: 'bar',\r\n            foreColor: '#fff',\r\n        },\r\n        yaxis: {\r\n            labels: {\r\n                formatter: function (y) {\r\n                    return y + \"%\";\r\n                }\r\n            }\r\n        },\r\n        plotOptions: {\r\n            bar: {\r\n                colors: {\r\n                    ranges: [{\r\n                        from: Number.NEGATIVE_INFINITY,\r\n                        to: 0,\r\n                        color: '#F15B46'\r\n                    }, {\r\n                        from: 0,\r\n                        to: Number.MAX_SAFE_INTEGER,\r\n                        color: '#76c68f'\r\n                    }]\r\n                },\r\n                columnWidth: '45%',\r\n            }\r\n        },\r\n        dataLabels: {\r\n            enabled: false,\r\n        },\r\n    };\r\n\r\n    return (\r\n        <ReactApexChart \r\n          options={\r\n            {\r\n            xaxis: {\r\n                categories: labels\r\n            },\r\n              ...defaultSetting\r\n            }\r\n          } \r\n          series={[\r\n            {\r\n              name: 'Profit',\r\n              data: series\r\n            }\r\n          ]} \r\n          type=\"bar\"\r\n          height=\"240px\"\r\n        />\r\n    )\r\n};\r\n\r\nexport default BarChart;","import React from 'react';\r\nimport ReactApexChart from 'react-apexcharts';\r\n\r\nconst LineChart = props => {\r\n    const { data } = props;\r\n    const options = {\r\n        chart: {\r\n            height: 350,\r\n            type: 'area',\r\n            foreColor: '#fff',\r\n            zoom: {\r\n                enabled: false\r\n            }\r\n        },\r\n        stroke: {\r\n            curve: 'straight'\r\n        },\r\n        xaxis: {\r\n            type: 'datetime'\r\n        },\r\n        yaxis: {\r\n            labels: {\r\n                formatter: function(value) {\r\n                    return value.toFixed(1);\r\n                }\r\n            }\r\n        },\r\n        dataLabels: {\r\n            enabled: false\r\n        },\r\n    };\r\n\r\n    return (\r\n        <ReactApexChart \r\n          options={options} \r\n          series={[{\r\n              name: \"price\",\r\n              data: data\r\n          }]} \r\n          type= 'area' \r\n          style={{color: '#000'}} \r\n          height=\"300px\"\r\n        />\r\n    )\r\n}\r\n\r\nexport default LineChart;","import React, { useState, useEffect } from 'react';\r\nimport DonutChart from './component/chart/DonutChart';\r\nimport Table from './component/Table';\r\nimport Info from './component/Info';\r\nimport BarChart from './component/chart/BarChart';\r\nimport LineChart from './component/chart/LineChart';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport { FaFileCsv } from 'react-icons/fa';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport axios from 'axios';\r\nimport './App.css';\r\n\r\nconst App = () => {\r\n  const [dataBundle, setDataBundle] = useState({\r\n    infoData: {\r\n      totalCost: 0,\r\n      myAsset: 0,\r\n      ROI: 0,\r\n      totalProfit: 0\r\n    },\r\n    enterprises: [],\r\n    tradingHistory: []\r\n  });\r\n  const [reqState, setReqState] = useState({\r\n    reqSend: false,\r\n    fileLoaded: false\r\n  });\r\n  const [fileEnter, setFileEnter] = useState(false);\r\n  const [hisPerformance, setHisPerformance] = useState([{\r\n    x: new Date(1640269800*1000).toLocaleString(),\r\n    y: 100\r\n  }]);\r\n\r\n  const [holdingStockTable, setHoldingStockTable] = useState({\r\n    headRow: ['代號', '股數', '單位成本', '損益', '占比'],\r\n    targetData: ['symbol', 'totalQuantity', 'averageCost', 'totalProfit', 'holdingPercent']\r\n  });\r\n  const tradingHistoryTable = {\r\n    headRow: ['代號', '交易時間', '股數', '成交價', '金額'],\r\n    targetData: ['symbol', 'tradingDate', 'quantity', 'purchasePrice', 'totalCost']\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log('in useEffect');\r\n    document.title = \"Portfolio\";\r\n    if (reqState.fileLoaded) {\r\n      getHisPerformance(0, 7);\r\n    }\r\n  }, [dataBundle]);\r\n\r\n  const demoData = async () => {\r\n    await requestFinanceData(['MSFT', 'SMH', 'QQQ', 'VOO']);\r\n    initData(\r\n      [\r\n        [\"SMH\",\"300\",\"2021/12/6\",\"16:00 EST\",\"-1.1499939\",\"299.57\",\"301.38\",\"290.51\",\"5105964\",\"20211206\",\"299.02\",\"0.96984\",\"\",\"\",\"\",\"\"],\r\n        [\"MSFT\",\"326.19\",\"2021/12/6\",\"16:00 EST\",\"3.1799927\",\"323.95\",\"327.42\",\"319.23\",\"30032556\",\"20211126\",\"334.11\",\"0.29929\",\"\",\"\",\"\",\"\"],\r\n        [\"MSFT\",\"326.19\",\"2021/12/6\",\"16:00 EST\",\"3.1799927\",\"323.95\",\"327.42\",\"319.23\",\"30032556\",\"20211206\",\"324.71\",\"1.75542\",\"\",\"\",\"\",\"\"],\r\n        [\"VOO\",\"421.82\",\"2021/12/6\",\"16:00 EST\",\"4.98001\",\"419.41\",\"423.64\",\"417\",\"7124862\",\"20211126\",\"424.96\",\"0.35298\",\"\",\"\",\"\",\"\"],\r\n        [\"VOO\",\"421.82\",\"2021/12/6\",\"16:00 EST\",\"4.98001\",\"419.41\",\"423.64\",\"417\",\"7124862\",\"20211206\",\"419.85\",\"2.71527\",\"\",\"\",\"\",\"\"],\r\n        [\"QQQ\",\"386.2\",\"2021/12/6\",\"16:00 EST\",\"3.0700073\",\"383.63\",\"387.6\",\"379.31\",\"64706783\",\"20211126\",\"396.07\",\"0.25248\",\"\",\"\",\"\",\"\"],\r\n        [\"QQQ\",\"386.2\",\"2021/12/6\",\"16:00 EST\",\"3.0700073\",\"383.63\",\"387.6\",\"379.31\",\"64706783\",\"20211206\",\"384.08\",\"2.23912\",\"\",\"\",\"\",\"\"]\r\n      ],\r\n      {\"symbol\": 0,\"purchasePrice\": 10,\"quantity\": 11,\"tradingDate\": 9}\r\n    );\r\n  }\r\n\r\n  const loadData = async rows => {\r\n    for(let i = 0; i < rows[0].length; i++) {\r\n      rows[0][i] = rows[0][i].trim();\r\n    }\r\n    if (isValidCSV(rows[0])) { \r\n      const indexBundle = {\r\n        symbol: rows[0].indexOf('Symbol'),\r\n        purchasePrice: rows[0].indexOf('Purchase Price'),\r\n        quantity: rows[0].indexOf('Quantity'),\r\n        tradingDate: rows[0].indexOf('Trade Date'),\r\n      }\r\n      // store which enterprise need to request data\r\n      const symbols = [];\r\n      // store valid trading history in csv\r\n      const data = [];\r\n      for(let i = 1; i < rows.length; i++) {\r\n        if (rows[i][indexBundle.symbol] && rows[i][indexBundle.purchasePrice] && rows[i][indexBundle.quantity] && rows[i][indexBundle.tradingDate]) {\r\n          data.push(rows[i]);\r\n          if (!symbols.find(s => s === rows[i][indexBundle.symbol].trim()))\r\n            symbols.push(rows[i][indexBundle.symbol].trim());\r\n        }\r\n      }\r\n      await requestFinanceData(symbols);\r\n      initData(data, indexBundle);\r\n    }\r\n  };\r\n\r\n  const initData = (data, indexBundle) => {\r\n    const {infoData, enterprises} = getEnterprisesData(data, indexBundle);\r\n    const tradingHistory = getTradingHistory(data, indexBundle);\r\n    setDataBundle({\r\n      enterprises: enterprises,\r\n      tradingHistory: tradingHistory,\r\n      infoData: infoData\r\n    });\r\n  };\r\n\r\n  const getEnterprisesData = (tradingHistory, indexBundle) => {\r\n    const temp = [];\r\n    let totalCost = 0;\r\n    let totalProfit = 0;\r\n    let totalAsset = 0;\r\n    const currentPrices = {};\r\n    const localData = JSON.parse(sessionStorage.getItem('symbols'));\r\n    for(let l of localData) {\r\n      currentPrices[l.symbol] = l.data[l.data.length - 1];\r\n    }\r\n    const findEnterprise = (ar, target) => {\r\n      for(let i = 0; i < ar.length; i++) {\r\n        if (ar[i]['symbol'] === target)\r\n          return i;\r\n      }\r\n      return false;\r\n    };\r\n    for(let trading of tradingHistory) {\r\n      const symbol = trading[indexBundle.symbol];\r\n      // const currentPrice = parseFloat(trading[indexBundle.currentPrice]);\r\n      const currentPrice = currentPrices[symbol];\r\n      const tradingDate = parseFloat(trading[indexBundle.tradingDate]);\r\n      const purchasePrice = parseFloat(trading[indexBundle.purchasePrice]);\r\n      const quantity = parseFloat(trading[indexBundle.quantity]);\r\n      \r\n      totalCost += (purchasePrice * quantity);\r\n      totalAsset += (currentPrice * quantity);\r\n\r\n      const index = findEnterprise(temp, symbol);\r\n      if (index !== false) {\r\n        temp[index]['tradingHistory'].push({\r\n          purchasePrice: purchasePrice,\r\n          quantity: quantity\r\n        })\r\n        temp[index]['totalCost'] += (purchasePrice * quantity);\r\n        temp[index]['totalQuantity'] += quantity;\r\n      }\r\n      else {\r\n        temp.push({\r\n          symbol: symbol,\r\n          currentPrice: currentPrice,\r\n          tradingDate: tradingDate,\r\n          totalCost: (purchasePrice * quantity),\r\n          totalQuantity: quantity,\r\n          tradingHistory: [{\r\n            purchasePrice: purchasePrice,\r\n            quantity: quantity\r\n          }]\r\n        })\r\n      }\r\n    }\r\n    // set enterprise's totalProfit\r\n    for(let t of temp) {\r\n      t['holdingPercent'] = (Math.round(((t['currentPrice'] * t['totalQuantity']) / totalAsset)*10000) / 100);\r\n      let profit = 0;\r\n      const currentPrice = t['currentPrice'];\r\n      for(let th of t['tradingHistory']) {\r\n        profit += ((currentPrice - th['purchasePrice']) * th['quantity']);\r\n      }\r\n      t['totalProfit'] = profit;\r\n      totalProfit += profit;\r\n    }\r\n\r\n    // set enterprise's profit percent\r\n    for(let t of temp) {\r\n      t['profitPercent'] = Math.round((t.totalProfit / t.totalCost)*10000)/100;\r\n    }\r\n\r\n    // sort emterprise by holdingPercent\r\n    temp.sort((t1, t2) => {\r\n      return t2.holdingPercent - t1.holdingPercent;\r\n    })\r\n    \r\n    return {\r\n      infoData: {\r\n        totalCost: totalCost,\r\n        myAsset: (totalCost + totalProfit),\r\n        ROI: (totalProfit / totalCost),\r\n        totalProfit: totalProfit\r\n      },\r\n      enterprises: temp\r\n    };\r\n  };\r\n\r\n  const getTradingHistory = (tradingHistory, indexBundle) => {\r\n    const temp = [];\r\n    for(let trading of tradingHistory) {\r\n      const symbol = trading[indexBundle.symbol];\r\n      let tradingDate = trading[indexBundle.tradingDate];\r\n      const purchasePrice = parseFloat(trading[indexBundle.purchasePrice]);\r\n      const quantity = parseFloat(trading[indexBundle.quantity]);\r\n      \r\n      if (!tradingDate)\r\n        tradingDate = \"NaN\";\r\n      else\r\n        tradingDate = tradingDate.slice(0, 4) + '/' + tradingDate.slice(4, 6) + '/' + tradingDate.slice(6, 8);\r\n      temp.push({\r\n        symbol: symbol,\r\n        tradingDate: tradingDate,\r\n        quantity: quantity,\r\n        purchasePrice: purchasePrice,\r\n        totalCost: (purchasePrice * quantity)\r\n      })\r\n    }\r\n    // sort by tradingDate\r\n    temp.sort((t1, t2) => {\r\n      if (t1.tradingDate === \"NaN\" && t2.tradingDate !== \"NaN\")\r\n        return 1;\r\n      if (t1.tradingDate !== \"NaN\" && t2.tradingDate === \"NaN\")\r\n        return -1;\r\n      const d1 = t1.tradingDate.split('/');\r\n      const d2 = t2.tradingDate.split('/');\r\n      if (parseInt(d1[0]) > parseInt(d2[0]))\r\n        return -1;\r\n      if (parseInt(d1[0]) < parseInt(d2[0]))\r\n        return 1;\r\n      if (parseInt(d1[1]) > parseInt(d2[1]))\r\n        return -1;\r\n      if (parseInt(d1[1]) < parseInt(d2[1]))\r\n        return 1;\r\n      if (parseInt(d1[2]) > parseInt(d2[2]))\r\n        return -1;\r\n      if (parseInt(d1[2]) < parseInt(d2[2]))\r\n        return 1;\r\n    });\r\n    return temp;\r\n  };\r\n\r\n  const getEnterprisesSymbol = () => {\r\n    const temp = [];\r\n    for(let enterprise of dataBundle.enterprises) {\r\n      temp.push(enterprise.symbol);\r\n    }\r\n    return temp;\r\n  };\r\n\r\n  const getEnterprisesWeight = () => {\r\n    const temp = [];\r\n    for(let enterprise of dataBundle.enterprises) {\r\n      const price = (enterprise.totalQuantity * enterprise.currentPrice).toFixed(2);\r\n      temp.push(parseFloat(price));\r\n    }\r\n    return temp;\r\n  };\r\n\r\n  const getEnterpriseProfit = () => {\r\n    const temp = [];\r\n    for(let enterprise of dataBundle.enterprises) {\r\n      temp.push(Math.round((enterprise.totalProfit / enterprise.totalCost)*10000)/100);\r\n    }\r\n    return temp;\r\n  };\r\n\r\n  const requestFinanceData = async (s) => {\r\n    // Input \"symbols\" then traslate to string seperate by ','\r\n    let ss = \"\";\r\n    for(let st of s) {\r\n      ss += (st.trim() + \",\");\r\n    }\r\n    ss = ss.slice(0, ss.length-1);\r\n\r\n    const options = {\r\n      method: 'GET',\r\n      url: 'https://yfapi.net/v8/finance/spark',\r\n      headers: {\r\n        'x-api-key': 'auNxCyh1Gf66HIXod3SN5aeAVI6JUB37Kd5iClYh'\r\n      },\r\n      params: {\r\n        symbols: ss,\r\n        interval: \"1d\",\r\n        range: \"1y\"\r\n      }\r\n    };\r\n\r\n    setReqState({reqSend: true, fileLoaded: false});\r\n    return axios.request(options).then(response => {\r\n      const data = response.data;\r\n      console.log('response', data);\r\n      const symbols = [];\r\n      for (let symbol in data) {\r\n        // const MSFT = {data: data.MSFT.close, date: timestampToDate(data.MSFT.timestamp)};\r\n        symbols.push({symbol: symbol, data: data[symbol].close, date: data[symbol].timestamp});\r\n      }\r\n      sessionStorage.clear();\r\n      sessionStorage.setItem('symbols', JSON.stringify(symbols));\r\n      setReqState({reqSend: true, fileLoaded: true});\r\n    }).catch(error => {\r\n      console.log(error);\r\n      toast.error('請求資料時發生錯誤.');\r\n    });\r\n  }\r\n\r\n  const getHisPerformance = (monthsAgo, daysAgo) => {\r\n    const searchKey = monthsAgo + '-' + daysAgo + '-' + 'performance';\r\n    let performanceHistory = sessionStorage.getItem(searchKey);\r\n    if (performanceHistory) {\r\n      console.log('get search:', searchKey);\r\n      setHisPerformance(JSON.parse(performanceHistory));\r\n    }\r\n    else {\r\n      performanceHistory = [];\r\n      // find first data date\r\n      const firstDate = new Date();\r\n      firstDate.setMonth(firstDate.getMonth() - monthsAgo);\r\n      firstDate.setDate(firstDate.getDate() - daysAgo);\r\n      const now = Date.now();\r\n      const compareDate = (a, b) => {\r\n        const ay = a.getFullYear();\r\n        const am = a.getMonth();\r\n        const ad = a.getDate();\r\n  \r\n        const by = b.getFullYear();\r\n        const bm = b.getMonth();\r\n        const bd = b.getDate();\r\n  \r\n        if (ay < by) return 1;\r\n        if (ay === by && am < bm) return 1;\r\n        if (ay === by && am === bm && ad < bd) return 1;\r\n        if (ay === by && am === bm && ad === bd) return 0;\r\n        return -1;\r\n      }\r\n      const symbols = JSON.parse(sessionStorage.getItem('symbols'));\r\n      // loop with every day\r\n      for(let d = firstDate; d <= now; d.setDate(d.getDate() + 1)) {\r\n        let currentAsset = 0;\r\n        // use request data to get every enterprise price in the past\r\n        const pastPrice = [];\r\n        // for every symbol\r\n        for(let s of symbols) {\r\n          // for every date in symbol\r\n          for(let i = 0; i < s.date.length; i++) {\r\n            if (i === s.date.length-1) {\r\n              pastPrice.push({symbol: s.symbol, price: s.data[i]});\r\n              break;\r\n            }\r\n            // 1個月前的每一天 == 資料紀錄的日期\r\n            if (compareDate(d, new Date(s.date[i]*1000)) === 0) {\r\n              pastPrice.push({symbol: s.symbol, price: s.data[i]});\r\n              break;\r\n            }\r\n            // 假日 or 休市日\r\n            if (compareDate(d, new Date(s.date[i]*1000)) === -1 && compareDate(d, new Date(s.date[i+1]*1000)) === 1) {\r\n              pastPrice.push({symbol: s.symbol, price: s.data[i-1]});\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        // loop with every tradingHistory\r\n        for(let trade of dataBundle.tradingHistory) {\r\n          // 交易時間比現在還要早\r\n          if (compareDate(d, new Date(trade.tradingDate)) === -1 || compareDate(d, new Date(trade.tradingDate)) === 0) {\r\n            const pp = pastPrice.find(p => p.symbol === trade.symbol);\r\n            currentAsset += (trade.quantity * pp.price);\r\n          }\r\n        }\r\n        performanceHistory.push({x: d.toLocaleDateString(), y: currentAsset});\r\n      }\r\n      sessionStorage.setItem(searchKey, JSON.stringify(performanceHistory));\r\n      setHisPerformance(performanceHistory);\r\n    }\r\n  }\r\n\r\n  const isValidCSV = fileData => {\r\n    const checkList = ['Symbol', 'Purchase Price', 'Quantity', 'Trade Date'];\r\n    for(let symbol of checkList) {\r\n      if (fileData.indexOf(symbol) === -1) {\r\n        setFileEnter(false);\r\n        const errorMessage = 'csv檔缺少 \"' + symbol + '\" 欄位.';\r\n        toast.error(errorMessage);\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  const onDragEnter = e => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    setFileEnter(true);\r\n  }\r\n\r\n  const onDragOver = e => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n  const onDragLeave = e => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setFileEnter(false);\r\n  } \r\n\r\n  const onDrop = e => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    const file = e.dataTransfer.items[0].getAsFile();\r\n    csvReader(file);\r\n  }\r\n\r\n  const onChange = e => {\r\n    const file = e.target.files[0];\r\n    csvReader(file);\r\n    e.target.value = \"\";\r\n  }\r\n\r\n  const csvReader = file => {\r\n    const reader = new FileReader();\r\n    reader.onload = function () {\r\n      const dirtyRows = reader.result.split('\\n');\r\n      const rows = [];\r\n      for(let drow of dirtyRows) {\r\n        rows.push(drow.split(','));\r\n      }\r\n      loadData(rows);\r\n    };\r\n    reader.readAsBinaryString(file);\r\n  }\r\n\r\n  const switchFocus = e => {\r\n    const parent = e.target.parentNode;\r\n    const buttons = parent.childNodes;\r\n    for(let button of buttons) {\r\n      button.classList.remove('focus');\r\n    }\r\n    e.target.classList.add('focus');\r\n  }\r\n\r\n  const handleTableClick = e => {\r\n    if (e.target.textContent !== '損益')\r\n      return;\r\n    \r\n    if (holdingStockTable.targetData.includes('profitPercent')) {\r\n      setHoldingStockTable(\r\n        {\r\n          headRow: holdingStockTable.headRow,\r\n          targetData: ['symbol', 'totalQuantity', 'averageCost', 'totalProfit', 'holdingPercent']\r\n        }\r\n      );\r\n    }\r\n    else {\r\n      setHoldingStockTable(\r\n        {\r\n          headRow: holdingStockTable.headRow,\r\n          targetData: ['symbol', 'totalQuantity', 'averageCost', 'profitPercent', 'holdingPercent']\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className='App' style={reqState.fileLoaded ? {} : {maxHeight: '100vh', overflow: 'hidden', paddingLeft: '6px', paddingRight: '6px'}}>\r\n      <h1>My Portfolio</h1>\r\n      <div className={(!reqState.fileLoaded && reqState.reqSend) ? \"load\":\"hide\"}></div>\r\n      <div className={reqState.reqSend ? \"hide\":\"\"}>\r\n        <div \r\n            className=\"drag-file-block\"\r\n            onDragEnter={onDragEnter}\r\n            onDragOver={onDragOver}\r\n            onDragLeave={onDragLeave}\r\n            onDrop={onDrop}\r\n            style={fileEnter ? {backgroundColor: 'rgba(173, 216, 230, .5)'}:{backgroundColor: 'inherit'}}\r\n        >\r\n          <div className=\"dropInfo\">\r\n            <div className=\"fileIcon\"><FaFileCsv size={30}/></div>\r\n            <div>將 csv 檔拖曳至此</div>\r\n          </div>\r\n        </div>\r\n        <label className=\"input-label\">\r\n          <span>📁 上傳檔案</span>\r\n          <div style={{display: 'none'}}>\r\n            <input type=\"file\" accept='.csv' onChange={onChange}/>\r\n          </div>\r\n        </label>\r\n        <label className=\"input-label\" onClick={demoData}>\r\n          <span>💡 使用範例</span>\r\n        </label>\r\n      </div>\r\n      <main className={reqState.fileLoaded ? \"\":\"hide\"}>\r\n        <div className=\"block-row\" id=\"info\">\r\n          <Info data={parseFloat(dataBundle.infoData.totalCost.toFixed(2))} title={'投入金額'}/>\r\n          <Info data={parseFloat(dataBundle.infoData.myAsset.toFixed(2))} title={'股票市值'}/>\r\n          <Info data={parseFloat((dataBundle.infoData.ROI*100).toFixed(2)) + '%'} title={'報酬率'}  highlight={true}/>\r\n          <Info data={parseFloat(dataBundle.infoData.totalProfit) < 0 ?\r\n            parseFloat(parseFloat(dataBundle.infoData.totalProfit).toFixed(2)) :\r\n            '+' + parseFloat(parseFloat(dataBundle.infoData.totalProfit).toFixed(2))}\r\n            title={'總損益'}\r\n          />\r\n        </div>\r\n        <div className=\"block-title res-title\">\r\n          <h3>持股狀況</h3>\r\n        </div>\r\n        <div className=\"block-row\">\r\n          <div className=\"left chart\">\r\n            <DonutChart \r\n              series={getEnterprisesWeight().length === 0 ? [80000, 45000, 16000] : getEnterprisesWeight()} \r\n              labels={getEnterprisesSymbol().length === 0 ? ['stock1', 'stock2', 'stock3'] : getEnterprisesSymbol()}\r\n            />\r\n          </div>\r\n          <div className=\"right\" onClick={handleTableClick}>\r\n            <Table headRow={holdingStockTable.headRow} dataRows={dataBundle.enterprises} targetData={holdingStockTable.targetData}/>\r\n          </div>\r\n        </div>\r\n        <div className=\"block-row\">\r\n          <div className=\"left chart\" style={{color: '#000'}}>\r\n            <div className=\"block-title\">\r\n              <h3>績效</h3>\r\n            </div>\r\n            <BarChart \r\n              series={getEnterpriseProfit().length === 0 ? [5, 3, -10, 10, 7] : getEnterpriseProfit()} \r\n              labels={getEnterprisesSymbol().length === 0 ? ['stock1', 'stock2', 'stock3', 'stock4', 'stock5'] : getEnterprisesSymbol()}\r\n            />\r\n          </div>\r\n          <div className=\"right\">\r\n            <div className=\"block-title\">\r\n              <h3>交易紀錄</h3>\r\n            </div>\r\n            <Table headRow={tradingHistoryTable.headRow} dataRows={dataBundle.tradingHistory} targetData={tradingHistoryTable.targetData}/>\r\n          </div>\r\n        </div>\r\n        <div className=\"block-title res-title\">\r\n          <h3>股票市值走勢</h3>\r\n        </div>\r\n        <div>\r\n          <div>\r\n            <button className='focus timeButton' onClick={e => {\r\n              getHisPerformance(0, 7);\r\n              switchFocus(e);\r\n              }}>7天</button>\r\n            <button className=\"timeButton\" onClick={e => {\r\n              getHisPerformance(1, 0);\r\n              switchFocus(e);\r\n              }}>1月</button>\r\n            <button className=\"timeButton\" onClick={e => {\r\n              getHisPerformance(6, 0);\r\n              switchFocus(e);\r\n            }}>6月</button>\r\n            <button className=\"timeButton\" onClick={e => {\r\n              getHisPerformance(12, 0);\r\n              switchFocus(e);\r\n            }}>1年</button>\r\n          </div>\r\n          <LineChart data={hisPerformance}/>\r\n        </div>\r\n        <div className=\"footer\"></div>\r\n      </main>\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={5000}\r\n        theme=\"dark\"\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n        rtl={false}\r\n        pauseOnFocusLoss\r\n        draggable\r\n        pauseOnHover\r\n        />\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <App />\n  ,document.getElementById('root')\n);"],"sourceRoot":""}